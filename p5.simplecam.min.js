class Damp{constructor(e,a,b,c){this.val_reset=e,this.val_start=e,this.val_now=e,this.val_end=e,this.limit=c,this.speed=a,this.damp=b,this.state=null}active(){return null!==this.state}start(b){this.state=b,this.val_start=this.val_now}drag(c){if(this.active()){var a=this.state-c;this.val_end=this.val_start+a*this.speed,this.limit&&(this.val_end=Math.min(Math.max(this.val_end,this.limit[0]),this.limit[1]))}}end(){this.state=null}update(){return this.val_now=this.val_end*this.damp+this.val_now*(1-this.damp),this.val_now}reset(b){this.val_end=void 0===b?this.val_reset:b}}window.document.ontouchmove=null;class SimpleCam{constructor(a,c){this.parent=c,this.active=!0,this.dx=new Damp(0,-1,.07,[-400,400]),this.dy=new Damp(0,-1,.07,[-400,400]),this.rx=new Damp(0,.01,.07,[-Math.PI,Math.PI]),this.ry=new Damp(0,.01,.07,[-Math.PI,Math.PI]),this.zoom=new Damp(1e3,-10,.07,[400,1e4]),this.mouseDragging=0;var d=this;a.addEventListener("wheel",function(b){d.active&&(d.zoom.start(-b.deltaY),d.zoom.drag(10*b.deltaY),d.zoom.end())}),a.addEventListener("dblclick",function(){d.active&&d.reset()}),a.addEventListener("mousemove",function(){d.active&&d.mouseDragging&&d.dragP()}),a.addEventListener("mousedown",function(b){d.active&&(0===b.button?d.startOrbit():1===b.button?(d.startPan(),d.mouseDragging=!0,b.preventDefault()):2===b.button&&(d.startZoom(),d.mouseDragging=!0))}),a.addEventListener("mouseup",function(b){0===b.button&&d.endOrbit(),1===b.button&&d.endPan(),d.mouseDragging=0,2===b.button&&d.endZoom(),d.mouseDragging=0}),a.addEventListener("touchstart",function(b){d.active&&(1===b.touches.length&&d.startOrbitT(b.touches),2===b.touches.length&&d.startZoomT(b.touches))},!1),a.addEventListener("touchmove",function(b){d.active&&1===b.touches.length&&d.dragT(b.touches)},!1),a.addEventListener("touchend",function(){d.endOrbit(),d.endZoom()},!1),c.registerMethod("pre",function(){d.active&&(d.drag(),d.update())})}startPan(){this.dx.start(this.parent.mouseX),this.dy.start(this.parent.mouseY)}startOrbit(){this.rx.start(this.parent.mouseY),this.ry.start(this.parent.mouseX)}startOrbitT(a){this.rx.start(a[0].clientY),this.ry.start(a[0].clientX)}startZoom(){this.zoom.start(this.parent.mouseY)}startZoomT(a){this.endOrbit(),this.endZoom(),this.zoom.start(Math.hypot(a[0].clientX-a[1].clientX,a[0].clientY-a[1].clientY))}drag(){this.rx.drag(this.parent.mouseY),this.ry.drag(this.parent.mouseX),this.mouseDragging&&this.zoom.drag(this.parent.mouseY)}dragT(a){this.rx.drag(a[0].clientY),this.ry.drag(a[0].clientX)}dragZ(a){this.zoom.drag(this.parent.width-Math.hypot(a[0].clientX-a[1].clientX,a[0].clientY-a[1].clientY))}dragP(){this.dx.drag(this.parent.mouseX),this.dy.drag(this.parent.mouseY)}endOrbit(){this.rx.end(),this.ry.end()}endPan(){this.dx.end(),this.dy.end()}endZoom(){this.zoom.end()}activate(b){this.active=b}reset(){this.dx.reset(),this.dy.reset(),this.rx.reset(),this.ry.reset(),this.zoom.reset()}update(){this.dx.update(),this.dy.update(),this.rx.update(),this.ry.update(),this.zoom.update()}apply(b){b=b||this.parent,b.translate(this.dx.val_now,this.dy.val_now,-this.zoom.val_now),b.rotateX(this.rx.val_now),b.rotateZ(this.ry.val_now)}}SimpleCam.version="1.1.0",document.oncontextmenu=()=>!1,p5.prototype.createSimpleCam=function(){return new SimpleCam(window,this)};